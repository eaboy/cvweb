for(var navbarItems=document.getElementsByClassName("navbar-item"),i=0;i<navbarItems.length;i++)navbarItems[i].addEventListener("click",function(e){var t=this.getElementsByTagName("a")[0].href.split("#");if(deleteActiveClass(),this.classList.add("active"),2===t.length){e.preventDefault();var s=t[t.length-1];scrollToElement(document.getElementById(s))}});function scrollToElement(e){var t=.3*Math.abs(acumulativeOffset(e)-window.scrollY);window.scrollY<acumulativeOffset(e)?window.scroll(0,window.scrollY+t):window.scroll(0,window.scrollY-t),t!==.3*Math.abs(acumulativeOffset(e)-window.scrollY)?t>1?setTimeout(function(){scrollToElement(e)},40):(console.log(acumulativeOffset(e)),window.scroll(0,acumulativeOffset(e))):window.scroll(0,acumulativeOffset(e))}function deleteActiveClass(){for(var e=0;e<navbarItems.length;e++)navbarItems[e].classList.remove("active")}var previous,acumulativeOffset=function(e){var t=0;do{t+=e.offsetTop||0,e=e.offsetParent}while(e);return t},offsetWhoIAm=acumulativeOffset(document.getElementById("who-i-am"))-56,offsetStudies=acumulativeOffset(document.getElementById("studies"))-56,offsetExperience=acumulativeOffset(document.getElementById("experience"))-56,offsetAboutMe=acumulativeOffset(document.getElementById("about-me"))-56,offsetContact=acumulativeOffset(document.getElementById("contact"))-56;function changeMenuStyle(e){var t=window.pageYOffset;if(t>=0&&t<offsetWhoIAm){if(previous&&1===previous){if(1===previous)return!1}else previous=1;deleteActiveClass(),document.querySelector("a[href$='#header']").parentNode.classList.add("active"),document.querySelector(".navbar > .navbar-list").classList.remove("scrolled")}else if(document.querySelector(".navbar > .navbar-list").classList.add("scrolled"),t>=offsetWhoIAm&&t<offsetStudies){if(previous&&2===previous){if(2===previous)return!1}else previous=2;deleteActiveClass(),document.querySelector("a[href$='#who-i-am']").parentNode.classList.add("active"),document.querySelector(".who-i-am > article > .photo img").classList.add("animate")}else if(t>=offsetStudies&&t<offsetExperience){if(previous&&3===previous){if(3===previous)return!1}else previous=3;deleteActiveClass(),document.querySelector("a[href$='#studies']").parentNode.classList.add("active")}else if(t>=offsetExperience&&t<offsetAboutMe){if(previous&&4===previous){if(4===previous)return!1}else previous=4;deleteActiveClass(),document.querySelector("a[href$='#experience']").parentNode.classList.add("active")}else if(t>=offsetAboutMe&&t<offsetContact){if(previous&&5===previous){if(5===previous)return!1}else previous=5;deleteActiveClass(),document.querySelector("a[href$='#about-me']").parentNode.classList.add("active")}else{if(previous&&6===previous){if(6===previous)return!1}else previous=6;deleteActiveClass(),document.querySelector("a[href$='#contact']").parentNode.classList.add("active")}}window.addEventListener("scroll",changeMenuStyle);var textareaForm=document.getElementById("message"),othersRadio=document.getElementById("know-me-4"),radioButtons=document.querySelectorAll('input[name="know-me"]'),form=document.getElementsByTagName("form")[0],inputNombre=document.getElementById("nombre"),inputEmail=document.getElementById("email"),inputMessage=document.getElementById("message"),inputPhone=document.getElementById("phone"),submitButton=document.getElementById("enviar"),words=document.getElementById("words"),loadingIcon=document.createElement("i");function countWords(e){var t,s;(s=null!==(t=e.match(/\S+/g))?t.length:0)>150?(submitButton.disabled=!0,inputMessage.classList.add("error"),words.classList.add("error")):(submitButton.disabled=!1,inputMessage.classList.remove("error"),words.classList.remove("error")),words.innerHTML=s}function showOthersInput(){console.log(radioButtons)}loadingIcon.classList.add("fa","fa-spinner","fa-spin"),textareaForm.addEventListener("keyup",function(){countWords(textareaForm.value)}),othersRadio.addEventListener("click",function(){document.getElementById("others-input").classList.add("show")});for(i=0;i<radioButtons.length-1;i++)radioButtons[i].addEventListener("click",function(){document.getElementById("others-input").classList.remove("show")});form.addEventListener("submit",function(e){var t=!1;!1===inputNombre.checkValidity()&&(inputNombre.focus(),inputNombre.classList.add("error"),t=!0,inputNombre.addEventListener("keydown",function(){inputNombre.classList.remove("error")})),!1===inputEmail.checkValidity()&&(inputEmail.focus(),inputEmail.classList.add("error"),t=!0,inputEmail.addEventListener("keydown",function(){inputEmail.classList.remove("error")})),!1===inputPhone.checkValidity()&&(inputPhone.focus(),inputPhone.classList.add("error"),t=!0,inputPhone.addEventListener("keydown",function(){inputPhone.classList.remove("error")})),t?e.preventDefault():(submitButton.disabled=!0,submitButton.appendChild(loadingIcon),e.preventDefault(),setTimeout(function(){form.reset(),submitButton.disabled=!1,submitButton.removeChild(loadingIcon),alert("Formulario enviado correctamente")},1e3))});var stars=document.getElementsByClassName("stars"),newComment={stars:0,comment:""},comments=[],commentsContainer=document.getElementById("comments-container");for(i=0;i<stars.length;i++)!function(e){stars[e].selected=!1,stars[e].addEventListener("mouseover",function(){overOrSelected(e)}),stars[e].addEventListener("mouseout",function(){mouseOut()}),stars[e].addEventListener("click",function(){selected(e)})}(i);function overOrSelected(e){for(var t=0;t<stars.length;t++)stars[t].classList.remove("fa-star-o"),stars[t].classList.remove("fa-star"),t<=e?(stars[t].classList.add("fa-star"),stars[t].classList.remove("fa-star-o")):(stars[t].classList.add("fa-star-o"),stars[t].classList.remove("fa-star"))}function mouseOut(){for(var e=0;e<stars.length;e++)stars[e].classList.remove("fa-star-o"),stars[e].classList.remove("fa-star"),stars[e].selected?(stars[e].classList.add("fa-star"),stars[e].classList.remove("fa-star-o")):(stars[e].classList.add("fa-star-o"),stars[e].classList.remove("fa-star"))}function selected(e){for(var t=0;t<stars.length;t++)stars[t].selected=t<=e;newComment.stars=e+1}function getComments(){var e=new XMLHttpRequest;e.open("GET","http://localhost:8000/api/comments",!0),e.setRequestHeader("Content-Type","application/json"),e.onreadystatechange=function(){4===e.readyState&&404!==e.status?(comments=JSON.parse(e.responseText),drawComments()):(console.log("Página no encontrada"),drawComments())},e.send()}function addComment(){var e=new XMLHttpRequest;e.open("POST","http://localhost:8000/api/comments",!0),e.setRequestHeader("Content-Type","application/json"),e.onreadystatechange=function(){4===e.readyState?(comments.unshift(JSON.parse(e.responseText)),clearCommentForm(),drawComments()):4===e.readyState&&404===e.status&&console.log("Página no encontrada")},e.send(JSON.stringify(newComment))}function drawComments(){for(;commentsContainer.firstChild;)commentsContainer.removeChild(commentsContainer.firstChild);if(0===comments.length)createComment("No hay comentarios");else for(var e=0;e<comments.length;e++)createComment("Comentario: "+comments[e].comment,comments[e].stars)}function createComment(e,t){var s=document.createElement("li"),n=document.createTextNode(e);if(s.appendChild(n),t){var o=document.createElement("div");o.appendChild(document.createTextNode("Valoración: "));for(var a=0;a<parseInt(t);a++){var r=document.createElement("i");r.classList.add("fa"),r.classList.add("fa-star"),o.appendChild(r)}s.appendChild(o)}commentsContainer.appendChild(s)}function clearCommentForm(){newComment={stars:0,comment:""},document.getElementsByTagName("form")[1].reset(),selected(-1),mouseOut()}document.getElementById("addNewComment").addEventListener("click",function(e){e.preventDefault(),newComment.comment=document.getElementById("newComment").value,0===newComment.stars||""===newComment.comment?document.getElementById("alert-new-comment").classList.add("show"):addComment()}),getComments();